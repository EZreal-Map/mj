# çŠä¸ºé¡¹ç›®å‰ç«¯æ¥å£è¯´æ˜æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: å²·æ±Ÿé¡¹ç›®  
**æŠ€æœ¯æ ˆ**: Vue 3 + Vite + Element Plus + Cesium + Pinia + Vue Router  
**é¡¹ç›®ç±»å‹**: æ°´åŠ¡ç®¡ç†å’ŒSWMMè®¡ç®—å±•ç¤ºç³»ç»Ÿ

## ä¸€ã€é¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„

```
frontend/
â”œâ”€â”€ eslint.config.js           # ESLinté…ç½®
â”œâ”€â”€ index.html                 # å…¥å£HTMLæ–‡ä»¶
â”œâ”€â”€ jsconfig.json             # JavaScripté…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ pnpm-lock.yaml           # pnpmé”å®šæ–‡ä»¶
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ vite.config.js           # Viteæ„å»ºé…ç½®
â”œâ”€â”€ public/
â”‚   â””â”€â”€ favicon.ico          # ç½‘ç«™å›¾æ ‡
â””â”€â”€ src/
    â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
    â”œâ”€â”€ main.js              # å…¥å£æ–‡ä»¶
    â”œâ”€â”€ apis/                # APIæ¥å£å±‚
    â”‚   â”œâ”€â”€ login/           # ç™»å½•ç›¸å…³æ¥å£
    â”‚   â”‚   â””â”€â”€ login.js
    â”‚   â”œâ”€â”€ swmm/            # SWMMæ¨¡å‹ç›¸å…³æ¥å£
    â”‚   â”‚   â”œâ”€â”€ calculate.js
    â”‚   â”‚   â”œâ”€â”€ conduit.js
    â”‚   â”‚   â”œâ”€â”€ junction.js
    â”‚   â”‚   â”œâ”€â”€ outfall.js
    â”‚   â”‚   â”œâ”€â”€ show.js
    â”‚   â”‚   â”œâ”€â”€ timeseries.js
    â”‚   â”‚   â””â”€â”€ transect.js
    â”‚   â””â”€â”€ system-manage/   # ç³»ç»Ÿç®¡ç†ç›¸å…³æ¥å£
    â”‚       â”œâ”€â”€ hydrologicalData.js
    â”‚       â””â”€â”€ hydropowerPlantData.js
    â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶
    â”‚   â””â”€â”€ swmm/           # SWMMç›¸å…³ç»„ä»¶
    â”‚       â”œâ”€â”€ CalculateDialog.vue
    â”‚       â”œâ”€â”€ CesiumContainer.vue
    â”‚       â”œâ”€â”€ ConduitDialog.vue
    â”‚       â”œâ”€â”€ JunctionDialog.vue
    â”‚       â”œâ”€â”€ LeftMenu.vue
    â”‚       â”œâ”€â”€ OutfallDialog.vue
    â”‚       â”œâ”€â”€ TimeSeriesDialog.vue
    â”‚       â””â”€â”€ TransectDialog.vue
    â”œâ”€â”€ router/              # è·¯ç”±é…ç½®
    â”‚   â””â”€â”€ index.js
    â”œâ”€â”€ stores/              # çŠ¶æ€ç®¡ç†
    â”‚   â””â”€â”€ swmm/
    â”‚       â””â”€â”€ viewer.js
    â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
    â”‚   â”œâ”€â”€ format.js
    â”‚   â”œâ”€â”€ request.js       # ä¸»è¦è¯·æ±‚å·¥å…·
    â”‚   â””â”€â”€ swmm/           # SWMMç›¸å…³å·¥å…·
    â”‚       â”œâ”€â”€ convert.js
    â”‚       â”œâ”€â”€ entity.js
    â”‚       â”œâ”€â”€ request.js   # SWMMä¸“ç”¨è¯·æ±‚å·¥å…·
    â”‚       â””â”€â”€ useCesium.js
    â””â”€â”€ views/               # é¡µé¢ç»„ä»¶
        â”œâ”€â”€ MenuView.vue     # ä¸»èœå•é¡µé¢
        â”œâ”€â”€ home-page/
        â”‚   â””â”€â”€ CesiumCalculateShow.vue
        â”œâ”€â”€ hydropower-plant-data/
        â”‚   â”œâ”€â”€ ElevationDischargeCurve.vue
        â”‚   â”œâ”€â”€ ElevationStorageCurve.vue
        â”‚   â”œâ”€â”€ HydropowerPlantParameters.vue
        â”‚   â””â”€â”€ ReservoirCharacteristicElevations.vue
        â”œâ”€â”€ login/
        â”‚   â””â”€â”€ LoginView.vue
        â”œâ”€â”€ plan-manage/
        â”‚   â””â”€â”€ SwmmEditView.vue
        â””â”€â”€ system-manage/
            â”œâ”€â”€ DailyAverageFlow.vue
            â”œâ”€â”€ EvaporationView.vue
            â”œâ”€â”€ MonthlyAverageFlow.vue
            â””â”€â”€ TendayAverageFlow.vue
```

## äºŒã€è·¯ç”±è®¾è®¡

### 2.1 è·¯ç”±æ€»è§ˆ

| è·¯ç”±è·¯å¾„ | ç»„ä»¶åç§° | é¡µé¢åŠŸèƒ½ | æ‰€å±æ¨¡å— |
|---------|---------|---------|---------|
| `/login` | Login | ç”¨æˆ·ç™»å½• | è®¤è¯æ¨¡å— |
| `/` | Menu | ä¸»èœå•å¸ƒå±€ | å¸ƒå±€ç»„ä»¶ |
| `/show` | Show | é¦–é¡µå±•ç¤º | é¦–é¡µæ¨¡å— |
| `/evaporation` | Evaporation | è’¸å‘é‡ç®¡ç† | ç³»ç»Ÿç®¡ç† |
| `/flow/daily-average` | DailyAverageFlow | æ—¥å¹³å‡æµé‡ | ç³»ç»Ÿç®¡ç† |
| `/flow/monthly-average` | MonthlyAverageFlow | æœˆå¹³å‡æµé‡ | ç³»ç»Ÿç®¡ç† |
| `/flow/tenday-average` | TendayAverageFlow | æ—¬å¹³å‡æµé‡ | ç³»ç»Ÿç®¡ç† |
| `/elevation-storage-curve` | ElevationStorageCurve | æ°´ä½-åº“å®¹æ›²çº¿ | æ°´åŠ¡è®¡ç®— |
| `/elevation-discharge-curve` | ElevationDischargeCurve | æ°´ä½-æµé‡æ›²çº¿ | æ°´åŠ¡è®¡ç®— |
| `/hydropower-plant-parameters` | HydropowerPlantParameters | æ°´ç”µç«™å‚æ•° | æ°´åŠ¡è®¡ç®— |
| `/reservoir-characteristic-elevations` | ReservoirCharacteristicElevations | æ°´åº“ç‰¹å¾æ°´ä½ | æ°´åŠ¡è®¡ç®— |
| `/swmm-edit` | SwmmEdit | SWMMæ–¹æ¡ˆç¼–è¾‘ | æ–¹æ¡ˆç®¡ç† |

### 2.2 è·¯ç”±ç»“æ„ä»£ç 

```javascript
const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/login',
      name: 'Login',
      component: () => import('../views/login/LoginView.vue'),
    },
    {
      path: '/',
      name: 'Menu',
      component: MenuView,
      children: [
        // åµŒå¥—è·¯ç”±é…ç½®
        { path: '', name: 'RedirectShow', redirect: '/show' },
        { path: 'show', name: 'Show', component: () => import('../views/home-page/CesiumCalculateShow.vue') },
        // ... å…¶ä»–å­è·¯ç”±
      ],
    },
  ],
})
```

## ä¸‰ã€åç«¯æ¥å£å‡½æ•°è®¾è®¡

### 3.1 ç³»ç»Ÿç®¡ç†æ¥å£æ·±åº¦åˆ†æ

#### A. æ¥å£æ¶æ„å…±æ€§
**åŸºç¡€URL**: `http://172.25.148.65/api/Action`  
**ç»Ÿä¸€ç«¯ç‚¹**: `POST /Run`  
**è¯·æ±‚æ ¼å¼**: æ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨ç›¸åŒçš„è¯·æ±‚ä½“ç»“æ„

#### B. æ¥å£ç»„ç»‡æ¨¡å¼

##### B.1 ç»Ÿä¸€è¯·æ±‚ä½“ç»“æ„
```javascript
{
  "language": "js",
  "names": ["action", "dispatch", "keys", "paramNames", "paramValues"],
  "values": ["/pms/Base", "æ“ä½œè·¯å¾„", "æ“ä½œé”®", "å‚æ•°å", "å‚æ•°å€¼"]
}
```

##### B.2 æ“ä½œç±»å‹åˆ†ç±»

**ğŸ“Š æ•°æ®æŸ¥è¯¢æ“ä½œ** (`dispatch: "/doreaddata/getdata"`)
```javascript
// åŸºç¡€æŸ¥è¯¢æ¨¡å¼
{
  names: ["action", "dispatch", "keys", "paramNames", "paramValues"],
  values: ["/pms/Base", "/doreaddata/getdata", "æŸ¥è¯¢é”®", "å‚æ•°å", "å‚æ•°å€¼"]
}

// ç®€å•æŸ¥è¯¢æ¨¡å¼ï¼ˆæ— å‚æ•°ï¼‰
{
  names: ["action", "dispatch", "keys"],
  values: ["/pms/Base", "/doreaddata/getdata", "æŸ¥è¯¢é”®"]
}
```

**ğŸ”§ æ•°æ®æ“ä½œ** (`dispatch: "/doBaseQuery/InsertArrayDB"`)
```javascript
{
  names: ["action", "dispatch", "keys", "paramNames", "paramValues"],
  values: ["/pms/Base", "/doBaseQuery/InsertArrayDB", "(æ“ä½œé”®)", "(å‚æ•°ç»“æ„)", "((æ•°æ®))"]
}
```

#### C. æ°´æ–‡æ•°æ®ç®¡ç†æ¥å£ (hydrologicalData.js)

##### C.1 è’¸å‘é‡ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–æœˆè’¸å‘é‡ | `getMonthEvaporationAxios` | `getMonthE` | `STCDT` |
| æ›´æ–°æœˆè’¸å‘é‡ | `updateMonthEvaporationBatchAxios` | `(updateMonthEvaporation)` | `(STCDT##Month##E_Day##OldMonth##OldE_Day)` |

##### C.2 æ—¥æµé‡ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–æ—¥æµé‡ | `getDailyFlowAxios` | `getDayFlowData` | `stcdt#begintime#endtime` |
| æ›´æ–°æ—¥æµé‡ | `updateDailyFlowBatchAxios` | `(modifyQDay)` | `(STCDT##Time##Value)` |
| åˆ é™¤æ—¥æµé‡ | `deleteDailyFlowAxios` | `(DeleteQDay)` | `(STCDT##Time##HQ)` |
| æ·»åŠ æ—¥æµé‡ | `addDailyFlowAxios` | `(AddDayFlowData)` | `(PTCode##Time##Value##STCDT##HQ)` |

##### C.3 æœˆæµé‡ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–å¤šå¹´æœˆå¹³å‡ | `getSelSeqflowDataAxios` | `getselSeqflowData` | `ptcode#Sublocal#intSeq#interval#selyear` |
| è·å–å¹´åº¦æœˆå¹³å‡ | `getSelYearflowDataAxios` | `getselYearflowData` | `ptcode#Sublocal#year#interval` |
| è·å–å†å²æœˆæ•°æ® | `getMonthlyOriginalHydroAxios` | - | ç‰¹æ®Šè°ƒç”¨ï¼š`/DataGridQuery/GetOriginalHydro` |
| æ›´æ–°æœˆæµé‡ | `updateMonthlyFlowBatchAxios` | `(UpdateQMonth)` | `(PTCode##Year##M1##...##M12##STCDT)` |
| åˆ é™¤æœˆæµé‡ | `deleteMonthlyFlowAxios` | `(DeleteQMonth)` | `(PTCode##Year)` |
| æ·»åŠ æœˆæµé‡ | `addMonthlyFlowAxios` | `(AddQMonth)` | `(PTCode##Year##M1##...##M12##QYear##STCDT)` |

##### C.4 æ—¬æµé‡ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–æ—¬æµé‡ | `getAllTDFlowDataAxios` | `getAllTDFlowData` | `stcdt` |
| æ›´æ–°æ—¬æµé‡ | `updateTendayFlowBatchAxios` | `(UpdateQTenDays)` | `(PTCode##STCDT##Year##TD1##...##TD36)` |
| åˆ é™¤æ—¬æµé‡ | `deleteTendayFlowAxios` | `(DeleteQTenDays)` | `(PTCode##STCDT##Year)` |
| æ·»åŠ æ—¬æµé‡ | `addTendayFlowAxios` | `(AddQTenDays)` | `(PTCode##STCDT##Year##TD1##...##TD36)` |

#### D. æ°´ç”µç«™æ•°æ®ç®¡ç†æ¥å£ (hydropowerPlantData.js)

##### D.1 æ°´ä½-åº“å®¹ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–åº“å®¹æ•°æ® | `getReservoirVAxios` | `getReservoirV` | `stcdt` |
| æ›´æ–°åº“å®¹æ•°æ® | `updateReservoirVBatchAxios` | `(UpdateReservoirV)` | `(PTCode##ZI##V##OldZI##OldV##ES)` |
| åˆ é™¤åº“å®¹æ•°æ® | `deleteReservoirVAxios` | `(DeleteReservoirV)` | `(PTCode##ZI##V)` |

##### D.2 æ°´ä½-æµé‡ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–æµé‡æ•°æ® | `getZdownQAxios` | `getZdownQBASE` | `stcdt` |
| æ›´æ–°æµé‡æ•°æ® | `updateZdownQBatchAxios` | `(UpdateZdownQ)` | `(PTCode##Z_down##Q_down##OldZ_down##OldQ_down)` |
| åˆ é™¤æµé‡æ•°æ® | `deleteZdownQAxios` | `(DeleteZdownQ)` | `(PTCode##Z_down##Q_down)` |
| æ·»åŠ æµé‡æ•°æ® | `addZdownQAxios` | `(addZdownQ)` | `(PTCode##Z_down##Q_down)` |

##### D.3 æ°´åº“ç‰¹å¾æ°´ä½ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–ç‰¹å¾æ°´ä½ | `getReservoirInfoAxios` | `SelectSys_Reservoir_Info` | æ— å‚æ•° |
| æ›´æ–°ç‰¹å¾æ°´ä½ | `updateReservoirInfoBatchAxios` | `(UpdateSys_Reservoir_Info)` | `(PTCode##STCDT##DTEL##...##BSDRA)` |
| åˆ é™¤ç‰¹å¾æ°´ä½ | `deleteReservoirInfoAxios` | `(DeleteSys_Reservoir_Info)` | `(PTCode##STCDT)` |

##### D.4 æ°´ç”µç«™å‚æ•°ç®¡ç†
| åŠŸèƒ½ | å‡½æ•°å | keyså€¼ | å‚æ•°ç»“æ„ |
|------|--------|--------|---------|
| è·å–ç”µç«™å‚æ•° | `getDispatchParameterAxios` | `SelectSys_Dispatch_Parameter` | æ— å‚æ•° |
| æ›´æ–°ç”µç«™å‚æ•° | `updateDispatchParamsBatchAxios` | `(UpdateSys_Dispatch_Parameter)` | `(PTCode##HDesign##...##Discrete)` |

### 3.2 æ¥å£å…±æ€§ç‰¹å¾æ€»ç»“

#### A. æ¶æ„è®¾è®¡æ¨¡å¼

##### A.1 ç»Ÿä¸€çš„æ¥å£æ¶æ„
- **å•ä¸€ç«¯ç‚¹**: æ‰€æœ‰ç³»ç»Ÿç®¡ç†æ¥å£éƒ½ä½¿ç”¨ `POST /Run`
- **å‚æ•°åŒ–åŒºåˆ†**: é€šè¿‡ `dispatch` å’Œ `keys` å‚æ•°åŒºåˆ†ä¸åŒåŠŸèƒ½
- **ç»“æ„åŒ–æ•°æ®**: ä½¿ç”¨ `##` ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦ï¼Œ`((data))` ä½œä¸ºæ•°æ®åŒ…è£…æ ¼å¼

##### A.2 å‘½åè§„èŒƒ
- **æŸ¥è¯¢å‡½æ•°**: `get[Entity][Type]Axios` (å¦‚: `getDailyFlowAxios`)
- **æ›´æ–°å‡½æ•°**: `update[Entity]BatchAxios` (å¦‚: `updateDailyFlowBatchAxios`)
- **åˆ é™¤å‡½æ•°**: `delete[Entity]Axios` (å¦‚: `deleteDailyFlowAxios`)
- **æ·»åŠ å‡½æ•°**: `add[Entity]Axios` (å¦‚: `addDailyFlowAxios`)

#### B. å‚æ•°ä¼ é€’æ¨¡å¼

##### B.1 æŸ¥è¯¢ç±»æ¥å£å‚æ•°
- **ç®€å•æŸ¥è¯¢**: `stcdt`, `STCDT`, `ptcode`
- **æ—¶é—´èŒƒå›´æŸ¥è¯¢**: `stcdt#begintime#endtime`
- **å¤åˆæŸ¥è¯¢**: `ptcode#Sublocal#intSeq#interval#selyear`

##### B.2 æ“ä½œç±»æ¥å£å‚æ•°
- **æ•°æ®åˆ†éš”ç¬¦**: `##` åˆ†éš”å­—æ®µ
- **æ•°æ®åŒ…è£…**: `((å­—æ®µ1##å­—æ®µ2##...))` æˆ– `((æ•°æ®è¡Œ1)##(æ•°æ®è¡Œ2)##...)`
- **æ—§å€¼å¯¹æ¯”**: æ›´æ–°æ“ä½œé€šå¸¸åŒ…å« `OldValue` å­—æ®µç”¨äºå¯¹æ¯”

#### C. å“åº”å¤„ç†æ¨¡å¼

##### C.1 ç»Ÿä¸€çš„å“åº”è§£æ
```javascript
// 1. è·å–å“åº”å­—ç¬¦ä¸²
const responseStr = response.data[0]

// 2. ä½¿ç”¨evalæ‰§è¡ŒJavaScriptä»£ç 
const retWrapper = {}
eval(`
  (function() {
    ${responseStr}
    retWrapper.ret = ret;
  })()
`)

// 3. æå–ç»“æœæ•°æ®
const resultData = retWrapper.ret.dataKey
```

##### C.2 é”™è¯¯å¤„ç†æœºåˆ¶
- **ä¸šåŠ¡æ ¡éªŒ**: å‰ç«¯è¿›è¡Œæ•°æ®æœ‰æ•ˆæ€§æ£€æŸ¥
- **ç½‘ç»œé”™è¯¯**: ä½¿ç”¨ `try-catch` åŒ…è£…è¯·æ±‚
- **ç”¨æˆ·æç¤º**: ç»Ÿä¸€ä½¿ç”¨ `ElMessage` è¿›è¡ŒæˆåŠŸ/å¤±è´¥æç¤º

#### D. æ•°æ®å¤„ç†ç‰¹å¾

##### D.1 æ•°æ®éªŒè¯æ¨¡å¼
```javascript
// 1. ç©ºå€¼æ£€æŸ¥
if (value === '' || value === null || typeof value === 'undefined') {
  ElMessage.warning('æ•°æ®ä¸èƒ½ä¸ºç©º')
  return Promise.reject()
}

// 2. æ•°å€¼æ£€æŸ¥
if (isNaN(Number(value)) || Number(value) < 0) {
  ElMessage.warning('è¯·è¾“å…¥æœ‰æ•ˆçš„éè´Ÿæ•°å­—')
  return Promise.reject()
}

// 3. å˜æ›´æ£€æŸ¥
if (oldValue === newValue) {
  ElMessage.warning('æ²¡æœ‰æ•°æ®éœ€è¦æ›´æ–°')
  return Promise.reject()
}
```

##### D.2 æ‰¹é‡æ“ä½œæ¨¡å¼
- **æ•°æ®å¯¹æ¯”**: å¾ªç¯æ¯”è¾ƒæ–°æ—§æ•°æ®å·®å¼‚
- **æ‰¹é‡åŒ…è£…**: å°†å¤šè¡Œæ•°æ®åŒ…è£…æˆç‰¹å®šæ ¼å¼
- **åŸå­æ“ä½œ**: ä¸€æ¬¡è¯·æ±‚å¤„ç†æ‰€æœ‰å˜æ›´

#### E. ä¸šåŠ¡é€»è¾‘ç‰¹å¾

##### E.1 æ—¶é—´å¤„ç†
- **æ—¶é—´æ ¼å¼åŒ–**: ä½¿ç”¨ `formatDate()` å°† Date å¯¹è±¡è½¬æ¢ä¸º `YYYY-MM-DD`
- **æ—¶é—´èŒƒå›´**: æ”¯æŒå¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´çš„åŒºé—´æŸ¥è¯¢
- **é»˜è®¤æ—¶é—´**: æŸäº›æ¥å£æ”¯æŒé»˜è®¤æ—¶é—´é€»è¾‘ï¼ˆå¦‚å»å¹´åŒæœŸï¼‰

##### E.2 ç¼–ç è§„åˆ™
- **PTCode**: ç”µç«™ç¼–ç ï¼Œé€šå¸¸ä¸º `STCDT` çš„å‰6ä½
- **STCDT**: å®Œæ•´çš„ç«™ç‚¹ç¼–ç 
- **æ•°æ®åˆ†ç»„**: æŒ‰æœˆä»½(M1-M12)ã€æ—¬(TD1-TD36)ç­‰æ—¶é—´ç»´åº¦ç»„ç»‡æ•°æ®

##### E.3 ä¸šåŠ¡æµç¨‹
- **æŸ¥è¯¢ â†’ ç¼–è¾‘ â†’ ä¿å­˜**: æ ‡å‡†çš„æ•°æ®ç®¡ç†æµç¨‹
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒå¤šè¡Œæ•°æ®çš„æ‰¹é‡å¢åˆ æ”¹
- **æ•°æ®æ ¡éªŒ**: ä¸¥æ ¼çš„æ•°æ®æœ‰æ•ˆæ€§éªŒè¯

#### F. æŠ€æœ¯å®ç°ç‰¹ç‚¹

##### F.1 å¼‚æ­¥å¤„ç†
- **Promise**: æ‰€æœ‰æ¥å£éƒ½è¿”å› Promise
- **async/await**: ä½¿ç”¨ç°ä»£å¼‚æ­¥è¯­æ³•
- **é”™è¯¯ä¼ æ’­**: é€šè¿‡ `Promise.reject()` ä¼ æ’­ä¸šåŠ¡é”™è¯¯

##### F.2 æ•°æ®è½¬æ¢
- **å­—ç¬¦ä¸²æ‹¼æ¥**: ä½¿ç”¨ `join('##')` æ„å»ºå‚æ•°å­—ç¬¦ä¸²
- **æ•°å€¼è½¬æ¢**: ä½¿ç”¨ `Number()` å’Œ `parseFloat()` è¿›è¡Œç±»å‹è½¬æ¢
- **æ•°ç»„å¤„ç†**: ä½¿ç”¨ `map()`, `filter()`, `some()` ç­‰æ•°ç»„æ–¹æ³•

### 3.3 SWMMæ¨¡å‹æ¥å£å¯¹æ¯”

**åŸºç¡€URL**: `http://127.0.0.1:9033`  
**æ¥å£é£æ ¼**: æ ‡å‡†RESTful API

#### ä¸ç³»ç»Ÿç®¡ç†æ¥å£çš„å·®å¼‚å¯¹æ¯”

| ç‰¹å¾ | ç³»ç»Ÿç®¡ç†æ¥å£ | SWMMæ¥å£ |
|------|-------------|----------|
| **æ¶æ„æ¨¡å¼** | å•ä¸€ç«¯ç‚¹å‚æ•°åŒ– | å¤šç«¯ç‚¹RESTful |
| **è¯·æ±‚æ–¹å¼** | ç»Ÿä¸€POST /Run | GET/POST/PUT/DELETE |
| **å‚æ•°æ ¼å¼** | å­—ç¬¦ä¸²æ‹¼æ¥ `##` | JSONå¯¹è±¡ |
| **å“åº”æ ¼å¼** | JavaScriptä»£ç å­—ç¬¦ä¸² | JSONæ ¼å¼ `{code, message, data}` |
| **é”™è¯¯å¤„ç†** | evalæ‰§è¡Œ+ä¸šåŠ¡åˆ¤æ–­ | HTTPçŠ¶æ€ç +JSON |
| **æ•°æ®è§£æ** | evalæ‰§è¡ŒåŠ¨æ€ä»£ç  | ç›´æ¥JSONè§£æ |

#### SWMMæ¥å£ç¤ºä¾‹
```javascript
// æ ‡å‡†RESTfulé£æ ¼
export const getAllJunctionsAxios = () => request.get('/swmm/junctions')
export const createJunctionAxios = (data) => request.post('/swmm/junction', data)
export const updateJunctionByIdAxios = (id, data) => request.put(`/swmm/junction/${id}`, data)
export const deleteJunctionByIdAxios = (id) => request.delete(`/swmm/junction/${id}`)
```

## ğŸ“Š ç³»ç»Ÿç®¡ç†æ¥å£æ ¸å¿ƒç‰¹å¾æ€»ç»“

### ğŸ—ï¸ æ¥å£æ¶æ„ç»Ÿä¸€æ€§
1. **å•ä¸€å…¥å£**: æ‰€æœ‰æ¥å£éƒ½é€šè¿‡ `POST /Run` è°ƒç”¨
2. **å‚æ•°æ ‡å‡†åŒ–**: ä½¿ç”¨å›ºå®šçš„5å‚æ•°ç»“æ„ `[action, dispatch, keys, paramNames, paramValues]`
3. **æ“ä½œåˆ†ç±»**: æŸ¥è¯¢ç”¨ `/doreaddata/getdata`ï¼Œæ“ä½œç”¨ `/doBaseQuery/InsertArrayDB`

### ğŸ”„ æ•°æ®æµè½¬æ¨¡å¼
1. **è¯·æ±‚æ„å»º**: `names` + `values` æ•°ç»„å¯¹åº”å…³ç³»
2. **å‚æ•°åˆ†éš”**: ä½¿ç”¨ `#` åˆ†éš”æŸ¥è¯¢å‚æ•°ï¼Œ`##` åˆ†éš”æ“ä½œæ•°æ®
3. **æ•°æ®åŒ…è£…**: æ“ä½œæ•°æ®ç”¨ `((data))` åŒæ‹¬å·åŒ…è£…

### ğŸ› ï¸ ä¸šåŠ¡å¤„ç†è§„èŒƒ
1. **æ‰¹é‡æ“ä½œ**: æ‰€æœ‰æ›´æ–°æ“ä½œéƒ½æ”¯æŒæ‰¹é‡å¤„ç†
2. **æ•°æ®æ ¡éªŒ**: å‰ç«¯è¿›è¡Œä¸¥æ ¼çš„æ•°æ®æœ‰æ•ˆæ€§éªŒè¯
3. **å·®å¼‚å¯¹æ¯”**: æ›´æ–°æ—¶å¯¹æ¯”æ–°æ—§æ•°æ®ï¼Œåªå¤„ç†å˜æ›´éƒ¨åˆ†
4. **åŸå­äº‹åŠ¡**: ä¸€æ¬¡è¯·æ±‚å®Œæˆæ‰€æœ‰ç›¸å…³æ•°æ®çš„å˜æ›´

### ğŸ” å“åº”è§£ææœºåˆ¶
1. **åŠ¨æ€æ‰§è¡Œ**: ä½¿ç”¨ `eval()` æ‰§è¡Œåç«¯è¿”å›çš„JavaScriptä»£ç 
2. **ç»“æœæå–**: é€šè¿‡ `retWrapper.ret.dataKey` è·å–å…·ä½“æ•°æ®
3. **é”™è¯¯æ•è·**: ç»Ÿä¸€çš„ `try-catch` é”™è¯¯å¤„ç†

### ğŸ“‹ å‘½åå’Œç¼–ç è§„èŒƒ
1. **å‡½æ•°å‘½å**: `[æ“ä½œ][å®ä½“][ç±»å‹]Axios` æ ¼å¼
2. **å‚æ•°ç¼–ç **: `PTCode`(6ä½) + `STCDT`(å®Œæ•´ç¼–ç ) çš„å±‚çº§å…³ç³»
3. **æ—¶é—´ç»´åº¦**: æœˆ(M1-M12)ã€æ—¬(TD1-TD36)ã€æ—¥(YYYY-MM-DD)çš„æ ‡å‡†åŒ–
